"""
商談ログ分析用のプロンプトテンプレート
"""

# 課題定義（課題分類用）
CHALLENGE_DEFINITIONS = [
    {
        "category": "採用・人材確保に関する課題",
        "challenge": "特定の状況下での人材獲得の困難さ",
        "description": "特定のエリア（地方・郊外）、時間帯（早朝・夜間）、季節（年末年始の繁忙期、学生アルバイトの季節変動や卒業）、部門（生鮮など）で慢性的な人手不足に陥っている。"
    },
    {
        "category": "採用・人材確保に関する課題",
        "challenge": "採用市場での競争激化",
        "description": "近隣の競合他社との時給・待遇面での競争が激しい。"
    },
    {
        "category": "採用・人材確保に関する課題",
        "challenge": "外部労働力への依存と 直接雇用強化のニーズ",
        "description": "コスト増や質のばらつきを認識しつつも、スポットバイトや派遣に頼らざるを得ない。そのため、彼らを直接雇用に切り替えたい。"
    },
    {
        "category": "採用・人材確保に関する課題",
        "challenge": "採用難への打ち手がない",
        "description": "採用難への有効な打ち手が不足している。"
    },
    {
        "category": "採用・人材確保に関する課題",
        "challenge": "若手を採用できない",
        "description": "従業員の高齢化が進む一方で、若年層の確保に苦戦している。"
    },
    {
        "category": "採用・人材確保に関する課題",
        "challenge": "アルバイトパートの採用課題",
        "description": "正社員ではなく、アルバイト・パートの採用全般において、応募が集まらない、定員が充足しないといった課題を抱えている状況。"
    },
    {
        "category": "採用・人材確保に関する課題",
        "challenge": "シフトの欠員",
        "description": "シフトが埋まらない。"
    },
    {
        "category": "定着・労務・制度に関する課題",
        "challenge": "高い離職率・定着への課題",
        "description": "高い離職率・定着が全般的に課題となっている。"
    },
    {
        "category": "定着・労務・制度に関する課題",
        "challenge": "若手の早期離職への課題",
        "description": "特に若手社員の離職が課題となっている。"
    },
    {
        "category": "定着・労務・制度に関する課題",
        "challenge": "エンゲージメントの向上",
        "description": "従業員の生産性や働きがいを高めるための施策（インセンティブ活用など）を求めている。"
    },
    {
        "category": "定着・労務・制度に関する課題",
        "challenge": "福利厚生",
        "description": "従業員の満足度を向上させ定着率を高める、あるいは採用時の魅力を増すために、福利厚生制度の拡充や新しい施策の導入を検討している状況。"
    },
    {
        "category": "定着・労務・制度に関する課題",
        "challenge": "前払いニーズ",
        "description": "若手を中心に、給与の前払いのニーズがあると感じている、またはそのような話を聞いている。"
    }
]


class AnalysisPrompts:
    """分析用プロンプトを管理するクラス（小売版）"""

    @staticmethod
    def get_system_prompt():
        """
        システムプロンプトを取得

        Returns:
            str: システムプロンプト
        """
        return "あなたは営業分析のエキスパートです。給与前払い・即払いサービスの商談ログを分析し、プロダクトのどの要素が顧客に刺さったか、何が商談のきっかけになったかを特定します。"

    @staticmethod
    def get_user_prompt(activity_content):
        """
        ユーザープロンプトを取得

        Args:
            activity_content: 分析対象の活動内容

        Returns:
            str: ユーザープロンプト
        """
        return f"""
以下の営業商談ログを読んで、リクルート社の給与前払い・即払いサービスを提案する際に使えそうな要素が含まれているかを判断してください。

商談ログ:
{activity_content}

以下の観点で、この商談内容に該当する要素があるかを厳密に判定してください。
該当する要素が明確に読み取れる場合のみ1を返し、不明確な場合や関係ない内容の場合は0を返してください。

観点:
1. リクルートブランド: リクルートのブランド力や知名度が重要な要素になっていることが明確に読み取れる場合。
2. 人材課題の解決: 人材確保、採用、定着、離職防止などの人材に関する課題が商談内容に明確に含まれている場合
3. 福利厚生に効くこと: 従業員の福利厚生や満足度向上についてが商談内容に明確に含まれている場合
4. 前払い・即払いサービスを元から検討していた: 前払い・即払い自体を元々検討していた。それが明確に読み取れる場合のみ。
5. デジタル給与対応であること: デジタル給与のニーズが商談内容に明確に含まれている場合

重要: 商談内容と関係ない観点は必ず0にしてください。推測や一般論ではなく、商談ログに明確に書かれている内容のみで判断してください。

JSON形式で以下のように回答してください（1=該当する、0=該当しない）:
{{
  "リクルートブランド": 1 または 0,
  "人材課題の解決": 1 または 0,
  "福利厚生に効くこと": 1 または 0,
  "前払い・即払いサービスであること": 1 または 0,
  "デジタル給与対応であること": 1 または 0,
  "その他": 1 または 0
}}
"""


class HRAnalysisPrompts:
    """分析用プロンプトを管理するクラス（人事版）"""

    @staticmethod
    def get_system_prompt():
        """
        システムプロンプトを取得

        Returns:
            str: システムプロンプト
        """
        return "あなたは営業分析のエキスパートです。給与前払い・即払いサービスの商談ログを分析し、プロダクトのどの要素が顧客に刺さったか、何が商談のきっかけになったかを特定します。"

    @staticmethod
    def get_user_prompt(activity_content):
        """
        ユーザープロンプトを取得（人事版）

        Args:
            activity_content: 分析対象の活動内容

        Returns:
            str: ユーザープロンプト
        """
        return f"""
以下の営業商談ログを読んで、リクルート社の給与前払い・即払いサービスを提案する際に使えそうな要素が含まれているかを判断してください。

商談ログ:
{activity_content}

以下の観点で、この商談内容に該当する要素があるかを厳密に判定してください。
該当する要素が明確に読み取れる場合のみ1を返し、不明確な場合や関係ない内容の場合は0を返してください。

観点:
1. リクルートブランドから: リクルートのブランド力や知名度が重要な要素になっていることが明確に読み取れる場合。
2. 人材課題の解決方法として: 人材確保、採用、定着、離職防止などの人材に関する課題が商談内容に明確に含まれている場合
3. 福利厚生として: 従業員の福利厚生や満足度向上についてが商談内容に明確に含まれている場合
4. 前払い・即払いサービスを元から検討していたから: 前払い・即払い自体を元々検討していた。それが明確に読み取れる場合のみ。
5. デジタル給与対応であるから: デジタル給与のニーズが商談内容に明確に含まれている場合

重要: 商談内容と関係ない観点は必ず0にしてください。推測や一般論ではなく、商談ログに明確に書かれている内容のみで判断してください。

JSON形式で以下のように回答してください（1=該当する、0=該当しない）:
{{
  "リクルートブランドから": 1 または 0,
  "人材課題の解決方法として": 1 または 0,
  "福利厚生として": 1 または 0,
  "前払い・即払いサービスを元から検討していたから": 1 または 0,
  "デジタル給与対応であるから": 1 または 0
}}
"""


class ChallengeClassificationPrompts:
    """課題分類用プロンプトを管理するクラス"""

    @staticmethod
    def get_system_prompt():
        """
        システムプロンプトを取得

        Returns:
            str: システムプロンプト
        """
        return "あなたは人材・労務課題の分析エキスパートです。営業商談ログから、顧客が抱えている人材・労務上の課題を特定し、定義された課題カテゴリに分類します。"

    @staticmethod
    def get_user_prompt(activity_content):
        """
        ユーザープロンプトを取得（課題分類用）

        Args:
            activity_content: 分析対象の活動内容

        Returns:
            str: ユーザープロンプト
        """
        # 課題定義をJSON形式の文字列に変換
        import json
        challenges_json = json.dumps(CHALLENGE_DEFINITIONS, ensure_ascii=False, indent=2)

        return f"""
以下の営業商談ログを読んで、顧客が抱えている課題を特定してください。

商談ログ:
{activity_content}

以下の課題定義に基づいて、該当する課題があるかを厳密に判定してください。
該当する課題が明確に読み取れる場合のみ1を返し、不明確な場合や関係ない内容の場合は0を返してください。

課題定義:
{challenges_json}

重要: 商談内容と関係ない課題は必ず0にしてください。推測や一般論ではなく、商談ログに明確に書かれている内容のみで判断してください。

JSON形式で以下のように回答してください（1=該当する、0=該当しない）:
{{
  "特定の状況下での人材獲得の困難さ": 1 または 0,
  "採用市場での競争激化": 1 または 0,
  "外部労働力への依存と 直接雇用強化のニーズ": 1 または 0,
  "採用難への打ち手がない": 1 または 0,
  "若手を採用できない": 1 または 0,
  "アルバイトパートの採用課題": 1 または 0,
  "シフトの欠員": 1 または 0,
  "高い離職率・定着への課題": 1 または 0,
  "若手の早期離職への課題": 1 または 0,
  "エンゲージメントの向上": 1 または 0,
  "福利厚生": 1 または 0,
  "前払いニーズ": 1 または 0
}}
"""
